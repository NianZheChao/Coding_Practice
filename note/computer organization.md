# 哈工大 计算机组成原理

## 第一章 计算机系统概论

### 冯诺依曼计算机的特点

1. 计算机由五大部件组成。
2. 指令和数据以同等地位存于存储器，可按地址寻访。
3. 指令和数据用二进制数表示。
4. 指令由操作码和地址码组成。
5. **存储程序**。（程序存放在存储器当中）
6. **以运算器为中心。**

### 存储器的基本组成

主存储器：MAR、MDR、存储体

存储体：存储单元->存储元件->存储字

存储单元存放一串二进制代码；存储字是存储单元中二进制代码的组合；存储字长为存储单元中二进制代码的位数。

MAR：存储器地址寄存器，反应了存储单元的个数。

MDR：存储器数据寄存器，反映了存储字长。

## 总线

总线就是连接各个部件的信息传输线，是各个部件共享的传输介质。

总线上信息传送方式有**串行**和**并行**两种。其中并行传输距离较近。

### 总线结构

1. 单总线结构：CPU、主存、多个I/O设备之间，共用同一条系统总线。
2. 面向CPU的双总线结构：在CPU与主存之间有M总线，CPU与其他I/O设备之间有一条I/O总线。
3. 以存储器为中心的双总线结构：CPU、主存、I/O设备共用一条系统总线，而CPU与主存之间挂接有一条存储总线。
4. I/O总线与主存总线构成的双总线结构：主存总线连接CPU与主存，并通过通道（具有特殊功能的处理器，由通道对I/O统一管理，一般在操作系统中具体描述）连接I/O总线，I/O总线连接各个I/O接口，至各个设备。
5. 三总线结构：CPU与主存通过主存总线连接，主存与高速外部设备通过DMA总线连接，CPU通过I/O总线与所有外部设备连接。

### 总线分类

1. 片内总线：芯片内部的总线。
2. 系统总线：计算机各个部件之间的信息传输线。
   1. 数据总线：双向，与机器字长、存储字长相关。
   2. 地址总线：单向，与存储地址、I/O地址有关。
   3. 控制总线：有出（中断请求、总线请求）有入（存储器读写、总线允许、中断确认）。
3. 通信总线：用于计算机系统之间 或 计算机系统与其它系统之间的通信。

### 总线控制

#### 总线判优控制

- 主设备（模块）：对总线有控制权。
- 从设备（模块）：响应从主设备发来的总线命令。
- 总线判优控制
  - 集中式：将总线判优逻辑置于一个设备上
    - 链式查询
    - 计数器定时查询
    - 独立请求方式
  - 分布式

#### 总线通信控制

1. 目的：解决通信双方协调配合问题。
2. 总线传输周期：
   - 申请分配阶段：主模块申请，总线仲裁决定
   - 寻址阶段：主模块向从模块给出地址和命令
   - 传数阶段：主模块和从模块交换数据
   - 结束阶段：主模块撤销有关信息
3. 总线通信的四种方式
   - 同步通信：由统一时标控制数据传送
   - 异步通信：采用应答方式，没有公共时钟标准
   - 半同步通信：同步、异步结合
   - 分离式通信：充分挖掘系统总线每个瞬间的潜力

